<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Просмотр архивной записи</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="details-header">
        <div class="container">
            <div class="header-content">
                <button class="btn btn--back" onclick="window.location.href='archive.html'">
                    ← Назад к архиву
                </button>
                <div class="patient-info-header">
                    <h1 class="patient-name-large" id="patient-name">Загрузка записи...</h1>
                    <div class="patient-meta">
                        <span class="patient-meta-item">ID записи: <span id="record-id">-</span></span>
                        <span class="patient-meta-item">Дата: <span id="record-date">-</span></span>
                        <span class="patient-meta-item">Палата: <span id="patient-room">-</span></span>
                        <span class="patient-meta-item">Продолжительность: <span id="record-duration">-</span></span>
                    </div>
                </div>
                <div class="archive-badge">
                    Архивная запись
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="details-main">
        <div class="container">
            <div class="archive-view-layout">
                <!-- Main Content Area -->
                <div class="archive-content">
                    <!-- CTG Playback -->
                    <div class="ctg-card">
                        <div class="ctg-header">
                            <h3 class="card-title">Запись КТГ мониторинга</h3>
                            <div class="ctg-controls">
                                <button class="btn btn--small btn--primary" onclick="archiveViewer.togglePlayback()">
                                    <span id="playback-icon">▶</span> <span id="playback-text">Воспроизвести</span>
                                </button>
                                <button class="btn btn--small" onclick="archiveViewer.changeSpeed()">
                                    Скорость: <span id="speed-text">1x</span>
                                </button>
                                <button class="btn btn--small" onclick="archiveViewer.restart()">
                                    ⟲ В начало
                                </button>
                            </div>
                        </div>
                        
                        <!-- Dual Chart Container (как в patient-details) -->
                        <div class="ktg-dual-chart">
                            <!-- FHR Chart (Top) -->
                            <div class="ktg__chart-group">
                                <div class="ktg__chart-label">
                                    <span class="ktg__chart-title">ЧСС</span>
                                    <span class="ktg__chart-units">уд/мин</span>
                                </div>
                                <div class="ktg__chart-container ktg__chart-container--fhr">
                                    <canvas id="fhr-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- UA Chart (Bottom) -->
                            <div class="ktg__chart-group">
                                <div class="ktg__chart-label">
                                    <span class="ktg__chart-title">СДМ</span>
                                    <span class="ktg__chart-units">отн.ед</span>
                                </div>
                                <div class="ktg__chart-container ktg__chart-container--ua">
                                    <canvas id="ua-chart"></canvas>
                                </div>
                            </div>
                        </div>

<!-- Chart Stats -->
<div class="chart-stats" style="margin-bottom: 30px;">
    <div class="stat-box">
        <div class="stat-label">ЧСС плода</div>
        <div class="stat-value" id="fhr-value">-</div>
        <div class="stat-unit">уд/мин</div>
    </div>
    <div class="stat-box">
        <div class="stat-label">Вариабельность</div>
        <div class="stat-value" id="variability-value">-</div>
        <div class="stat-unit">уд/мин</div>
    </div>
    <div class="stat-box">
        <div class="stat-label">Акцелерации</div>
        <div class="stat-value" id="accel-value">-</div>
        <div class="stat-unit">за 20 мин</div>
    </div>
    <div class="stat-box">
        <div class="stat-label">Децелерации</div>
        <div class="stat-value" id="decel-value">-</div>
        <div class="stat-unit">за 20 мин</div>
    </div>
</div>

<!-- Timeline Scrubber -->
<div class="timeline-scrubber" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e5e5;">
    <div class="timeline-header">
        <span class="timeline-label">Временная шкала записи</span>
        <span class="timeline-range">
            <span id="current-time">00:00</span> / <span id="total-time">00:00</span>
        </span>
    </div>
    <div class="timeline-container">
        <input type="range" id="timeline-slider" class="timeline-slider" min="0" max="100" value="0">
        <div class="timeline-progress" id="timeline-progress"></div>
    </div>
</div>

                        <!-- Recording Info -->
                        <div class="recording-info">
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label">Средний FWBS Score</div>
                                    <div class="info-value" id="avg-fwbs">-</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">Исход родов</div>
                                    <div class="info-value" id="outcome">-</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">Время записи</div>
                                    <div class="info-value" id="record-time">-</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">Врач</div>
                                    <div class="info-value" id="doctor">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="assets/js/archive-view.js"></script>
</body>
</html>